// ã™ã¹ã¦ã® @use ã¯ãƒ•ã‚¡ã‚¤ãƒ«ã®æœ¬å½“ã®å…ˆé ­ã«ï¼ã‚³ãƒ¡ãƒ³ãƒˆã‚‚OK
@use "bootstrap/scss/bootstrap";
@use "bootstrap-icons/font/bootstrap-icons";
@use "components/floating_button";
@use "components/neon_buttons" as *;
@use "custom_styles";
@use "index_logs";
@use "modal_styles";
@use "mobile_apps";
@use "application_index";
@use "new_html";
@use "playlist_music";
@use "show_html";
@use "profile_styles";
@use "nokori_styles";
@use "swal_flash_craft";
@use "music_player";

// ğŸ”´ å¤–éƒ¨ãƒ†ãƒ¼ãƒCSSï¼ˆBootswatchç­‰ï¼‰ã¯èª­ã¿è¾¼ã¾ãªã„ï¼ˆç«¶åˆé˜²æ­¢ï¼‰
// @import url("...bootswatch...");  â† ä½¿ã‚ãªã„

.view-hidden {
  display: none !important;
  opacity: 0 !important;
  visibility: hidden !important;
  height: 0 !important;
  pointer-events: none !important;
}

/* è£œåŠ©ã‚¯ãƒ©ã‚¹ */
.mobile-only { display: none !important; }
.desktop-only { display: block !important; }

@media (max-width: 996px) {
  .desktop-only { display: none !important; }
  .mobile-only  { display: block !important; }
}

/* ãƒ¢ãƒ¼ãƒ€ãƒ«æ™‚ã‚‚ãƒ•ãƒƒã‚¿ãƒ¼ãƒ—ãƒ¬ãƒ¼ãƒ¤ãƒ¼ã¯å‰é¢ç¶­æŒï¼ˆå¾“æ¥ã©ãŠã‚Šï¼‰ */
body.modal-open #bottom-player { z-index: 20000 !important; }

/* showãƒšãƒ¼ã‚¸ã®ãƒ—ãƒ¬ãƒ¼ãƒ¤ãƒ¼é«˜ã•ï¼ˆå¾“æ¥ã©ãŠã‚Šï¼‰ */
body.playlist-show-page .bottom-player {
  position: fixed !important;
  bottom: 50px !important;
  left: 0 !important;
  right: 0 !important;
  z-index: 2000 !important;
}

@media (max-width: 996px) {
  html body .bottom-player {
    position: fixed !important;
    bottom: 80px !important;
    left: 0 !important;
    right: 0 !important;
    z-index: 2000 !important;
  }
}

/* ===== ãƒ¢ãƒã‚¤ãƒ«ï¼šãƒ—ãƒ¬ã‚¤ãƒªã‚¹ãƒˆâ€œä¸€è¦§â€ãƒ¢ãƒ¼ãƒ€ãƒ«å†…ã¯å¿…ãšã‚¿ãƒƒãƒ—å¯ ===== */
#playlist-modal-mobile {
  #super-search-panel { pointer-events: auto !important; }
  #playlist-sidebar-home,
  .filter-box,
  a, button, .playlist-link { pointer-events: auto !important; }
}

/* ãƒ¢ãƒ¼ãƒ€ãƒ«ä¸­ã¯ãƒ•ãƒƒã‚¿ãƒ¼ãŒã‚¿ãƒƒãƒ—ã‚’å¥ªã‚ãªã„ */
.modal-open .mobile-footer { pointer-events: none; }

/* ãƒ­ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°ã‚«ãƒãƒ¼ã‚’éš ã—ã¦ã„ã‚‹æ™‚ã¯ã‚¿ãƒƒãƒ—é˜»å®³ãªã— */
#loading-overlay.view-hidden { pointer-events: none !important; }

/* ãƒ—ãƒ¬ãƒ¼ãƒ¤ãƒ¼éè¡¨ç¤ºãƒ•ãƒ©ã‚° */
.no-player #bottom-player,
.no-player #hidden-sc-player { display: none !important; }

/* ãƒ•ãƒƒã‚¿ãƒ¼ãƒ—ãƒ¬ãƒ¼ãƒ¤ãƒ¼é«˜ã•ã®ä½™ç™½ */
:root { --footer-player-h: 84px; }
.emotion-log-show { padding-bottom: calc(var(--footer-player-h) + env(safe-area-inset-bottom, 0px)); }
body.no-player .emotion-log-show { padding-bottom: 0 !important; }

/* ãƒ¢ãƒã‚¤ãƒ«è©³ç´°ï¼šãƒšãƒ¼ã‚¸ãƒãƒ¼ã‚·ãƒ§ãƒ³èª¿æ•´ */
.emotion-log-show .pagination {
  position: static !important;
  inset: auto !important;
  float: none !important;
  display: flex;
  flex-wrap: wrap !important;
  justify-content: center !important;
  white-space: normal !important;
  gap: .25rem;
}

/* =========================================================
   â–¼â–¼ ã“ã“ãŒä»Šå›ã®ä¿®æ­£ãƒã‚¤ãƒ³ãƒˆ â–¼â–¼
   ã€Œview-switcher ã‚³ãƒ³ãƒ†ãƒŠãŒå­˜åœ¨ã™ã‚‹ãƒšãƒ¼ã‚¸é™å®šã€ã§
   ãƒ‡ã‚¹ã‚¯ãƒˆãƒƒãƒ—/ãƒ¢ãƒã‚¤ãƒ«ã®å¼·åˆ¶åˆ‡æ›¿ã‚’é©ç”¨ã™ã‚‹ã€‚
   ï¼ˆï¼ä»–ãƒšãƒ¼ã‚¸ã§ã¯ä¸€åˆ‡éš ã•ãªã„ â†’ ãƒ•ãƒƒã‚¿ãƒ¼ã ã‘ç¾è±¡ã‚’é˜²æ­¢ï¼‰
   ========================================================= */

/* ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã§ã¯ä½•ã‚‚ã—ãªã„ï¼ˆã‚°ãƒ­ãƒ¼ãƒãƒ«ã«ã¯éš ã•ãªã„ï¼‰ */
/* #desktop-view, #mobile-view ã¸ã®ã‚°ãƒ­ãƒ¼ãƒãƒ«æŒ‡å®šã¯ç½®ã‹ãªã„ */

/* view-switcher ãŒä»˜ä¸ã•ã‚ŒãŸãƒšãƒ¼ã‚¸ã ã‘åˆ‡æ›¿ */
[data-controller~="view-switcher"] #desktop-view { display: block; }
[data-controller~="view-switcher"] #mobile-view  { display: none; }

@media (max-width: 768px) {
  [data-controller~="view-switcher"] #desktop-view { display: none !important; }
  [data-controller~="view-switcher"] #mobile-view  { display: block !important; }

  /* â–¼ ãƒ¢ãƒã‚¤ãƒ«æ™‚ã€ãƒ¢ãƒã‚¤ãƒ«å´ã® .view-hidden ã‚’è§£é™¤ï¼ˆview-switcheré…ä¸‹ã®ã¿ï¼‰ */
  [data-controller~="view-switcher"] #mobile-view.view-hidden {
    display: block !important;
    opacity: 1 !important;
    visibility: visible !important;
    height: auto !important;
    pointer-events: auto !important;
  }
  [data-controller~="view-switcher"] #desktop-view.view-hidden {
    display: none !important;
  }

  /* è£œåŠ©ï¼ˆæ—¢å­˜ .mobile-only / .desktop-only ã¨æ•´åˆï¼‰ */
  .desktop-only { display: none !important; }
  .mobile-only  { display: block !important; }

  /* æ®‹ç•™ã—ã‚„ã™ã„ã‚«ãƒãƒ¼è¦ç´ ã®ç·Šæ€¥ç„¡åŠ¹åŒ–ã¯â€œæœ€ä½é™â€ */
  #loading-overlay,
  .modal-backdrop {
    display: none !important;
    opacity: 0 !important;
    visibility: hidden !important;
    pointer-events: none !important;
  }
}

/* â–¼ preloadã§çœŸã£é»’ã«ãªã‚‰ãªã„ä¿é™º */
html.preload body { visibility: visible !important; }

/* ==== ã“ã“ã‚ˆã‚Šä¸‹ã¯ã€ã‚ãªãŸã®æ—¢å­˜ã‚¹ã‚¿ã‚¤ãƒ«ï¼ˆãƒšãƒ¼ã‚¸å›ºæœ‰ãªã©ï¼‰ ==== */

/* ãƒ‰ãƒ­ãƒƒãƒ—ãƒ€ã‚¦ãƒ³ç­‰ï¼ˆã‚ãªãŸã®æ—¢å­˜CSSãŒã‚ã‚Œã°ãã®ã¾ã¾ï¼‰ */
.user-dropdown:hover .dropdown-menu { display: block; }

/* ãƒšãƒ¼ã‚¸ãƒãƒ¼ã‚·ãƒ§ãƒ³ã®è£…é£¾ï¼ˆæ—¢å­˜ï¼‰ */
.pagination>li>a { border: none; color: #696969; }
.pagination>.active>a { background: #93c9ff; border-radius: 15px; }
.pagination>li>a:hover { border-radius: 15px; }

/* ã‚¢ãƒã‚¿ãƒ¼ç·¨é›†ï¼ˆæ—¢å­˜ï¼‰ */
.rounded-circle { border-radius: 50%; border: 2px solid #e600ff; box-shadow: 0 0 8px rgba(230,0,255,.6); }
#cropContainer { position: relative; width: 80px; height: 80px; overflow: hidden; border: 2px solid #ccc; }
#cropImage { position: absolute; top: 0; left: 0; user-select: none; -webkit-user-select: none; max-width: none; max-height: none; cursor: grab; }
#avatarPreviewInline { width: 80px; height: 80px; border-radius: 50%; object-fit: cover; }

/* ãƒ¢ãƒã‚¤ãƒ«ã‚¹ãƒ¼ãƒ‘ãƒ¼ã‚µãƒ¼ãƒï¼ˆæ—¢å­˜ï¼‰ */
.mobile-super-search-modal-content { background: #141824; color: #fff; border-radius: 18px; box-shadow: 0 4px 20px #0006; }
.mobile-form-label { font-size: 1.06em; font-weight: 600; margin-bottom: .5em; color: #c6f6fa; }
.mobile-form-select, .mobile-form-control {
  border-radius: 8px; background: #202d36; color: #fff; border: 1px solid #364b6b;
  padding: .55em .9em; font-size: 1em;
}
.mobile-form-autocomplete { position: relative; }
.mobile-tag-suggestions {
  position: absolute; top: 100%; left: 0; width: 100%; z-index: 9999; margin: 0;
  border-radius: 0 0 12px 12px; background: #232b3a; border: 1px solid #2b3d4d;
  box-shadow: 0 2px 16px #0014; max-height: 180px; overflow-y: auto;
}
.mobile-super-search-btn:hover { transform: scale(1.04); box-shadow: 0 0 24px #ae5cff80; }
.mobile-reset-btn { min-width: 92px; }

@media (max-width: 520px) {
  .mobile-super-search-modal-content { border-radius: 0; box-shadow: none; }
}


/* =========================================================
  â–¼â–¼ ãƒ¢ãƒã‚¤ãƒ«èƒŒæ™¯ã®å®‰å®šåŒ–ï¼ˆiOS Safariå¯¾ç­–è¾¼ã¿ï¼‰9/3å¯ã‚‹å‰ã«è¡Œã£ãŸ â–¼â–¼
  - èƒŒæ™¯ã‚’ body ã«è¨­å®šã—ã¦ã„ã‚‹å ´åˆã§ã‚‚ç¸®ã¿/ã‚¿ã‚¤ãƒ«åŒ–ã‚’é˜²ã
  - view-switcher é…ä¸‹ã®ã¿å‰¯ä½œç”¨ã‚’æœ€å°åŒ–
   ========================================================= */
@media (max-width: 768px) {
  /* ãƒ“ãƒ¥ãƒ¼ãƒãƒ¼ãƒˆã®é«˜ã•åŸºæº–ã‚’å®‰å®šã•ã›ã‚‹ */
  html, body {
    height: auto !important;
    min-height: 100% !important;
  }

  /* ãƒ¢ãƒã‚¤ãƒ«å´ã®ãƒ©ãƒƒãƒ‘ã‚’ç¢ºå®Ÿã«å…¨é«˜åŒ–ï¼†æ¨ªã¯ã¿å‡ºã—é˜²æ­¢ */
  [data-controller~="view-switcher"] #mobile-view {
    position: relative;
    min-height: 100vh;   /* æ—§ç«¯æœ«å‘ã‘ */
    min-height: 100dvh;  /* iOS 16+ï¼Android Chrome */
    overflow-x: hidden;
    background: transparent !important; /* ãƒ©ãƒƒãƒ‘ã«ä½™è¨ˆãªèƒŒæ™¯ãŒã‚ã‚Œã°ç„¡åŠ¹åŒ– */
  }

  /* èƒŒæ™¯ãŒ body ã«ã‚ã‚‹æƒ³å®šã®â€œæ±ç”¨â€å®‰å®šåŒ–ï¼ˆç”»åƒãƒ‘ã‚¹ã¯è§¦ã‚‰ãªã„ï¼‰ */
  body {
    background-attachment: scroll !important;  /* iOSã® fixed ãƒã‚°å›é¿ */
    background-size: cover !important;         /* å…¨é¢ã‚«ãƒãƒ¼ã§ç¸®ã¿é˜²æ­¢ */
    background-position: center center !important;
    background-repeat: no-repeat !important;   /* ã‚¿ã‚¤ãƒ«åŒ–é˜²æ­¢ */
  }

  /* ã‚‚ã— container å´ã«èƒŒæ™¯ãŒè¨­å®šã•ã‚Œã¦ã„ãŸå ´åˆã¯æ‰“ã¡æ¶ˆã—ã¦ãƒ©ãƒƒãƒ‘ã§è¦‹ã›ã‚‹ */
  [data-controller~="view-switcher"] #mobile-view .container,
  [data-controller~="view-switcher"] #mobile-view .mobile-content {
    background: transparent !important;
    background-image: none !important;
  }

  /* Safari ã®æç”»å®‰å®šã®å°æ‰‹å…ˆï¼ˆå‰¯ä½œç”¨ãªã—ï¼‰ */
  [data-controller~="view-switcher"] #mobile-view {
    -webkit-backface-visibility: hidden;
    backface-visibility: hidden;
    transform: translateZ(0);
  }
}

/* ãƒ¢ãƒã‚¤ãƒ«å…¨é¢èƒŒæ™¯ã‚’ #mobile-view ã®æ“¬ä¼¼è¦ç´ ã§è¡¨ç¤ºï¼ˆfixedãƒã‚°å›é¿ï¼‰ */
@media (max-width: 768px) {
  [data-controller~="view-switcher"] #mobile-view::before {
    content: "";
    position: fixed;
    inset: 0;
    z-index: -1;
    /* ã“ã“ã«â€œä»Šä½¿ã£ã¦ã‚‹èƒŒæ™¯ç”»åƒâ€ã‚’æŒ‡å®šï¼ˆä¾‹ï¼šbodyã® background-image ã¨åŒã˜ã‚‚ã®ï¼‰ */
    background-image: inherit;          /* body ã¨åŒã˜æŒ‡å®šã‚’ç¶™æ‰¿ã§ãã‚‹ãªã‚‰ã“ã‚Œã§OK */
    background-size: cover;
    background-position: center;
    background-repeat: no-repeat;
    -webkit-backface-visibility: hidden;
    backface-visibility: hidden;
    transform: translateZ(0);
  }
}
