/* =========================================================
   ▼ 追記：ボトムプレーヤー出現時に下余白を自動で増やす
      - あなたの --mobile-footer-h / --mobile-bottom-gap を尊重
      - :has(#bottom-player) が効く環境はCSSだけで自動
      - 古い環境向けに body.player-visible でも同じ効果（付けなくても害なし）
   ========================================================= */

/* ボトムプレーヤーの見かけの高さ（端末に合わせて微調整OK） */
:root{
  --bottom-player-h: 96px; /* 84〜120px くらいで調整 */
}

/* 既存の下余白を “ベース値” として分離（あなたの値をそのまま利用） */
:root{
  --mobile-bottom-gap-base: calc(env(safe-area-inset-bottom, 0px) + var(--mobile-footer-h) + 72px);
  --mobile-bottom-gap: var(--mobile-bottom-gap-base);
}

/* ▼ プレーヤーが居るときは “ベース + プレーヤー高さ” に切り替え（最新ブラウザ） */
@supports(selector(body:has(#bottom-player))){
  body:has(#bottom-player){
    --mobile-bottom-gap: calc(var(--mobile-bottom-gap-base) + var(--bottom-player-h));
  }
}

/* ▼ 保険：もしJSで body に .player-visible を付けられるなら同様に反映（古いブラウザ） */
body.player-visible{
  --mobile-bottom-gap: calc(var(--mobile-bottom-gap-base) + var(--bottom-player-h));
}

/* ▼ モバイル投稿一覧の見切れ防止：既存指定を後勝ちで強制 */
@media (max-width: 996px){
  .mobile-content{
    padding-bottom: var(--mobile-bottom-gap) !important;
    box-sizing: border-box;
  }

  /* ページネーションを固定にしている場合の被り回避（固定していなければ無視されるだけ） */
  .mobile-pagination-center .pagination{
    position: static !important;
    left: auto !important;
    bottom: auto !important;
    transform: none !important;
    margin: 12px auto calc(var(--mobile-bottom-gap) - 12px) !important;
    display: flex;
  }

  /* スペーサ要素を置いている場合の保険（要素が無ければ何も起きません） */
  #logs_list_mobile .player-space-spacer{
    height: var(--mobile-bottom-gap) !important;
  }
}

/* ▼ デスクトップのスクロール領域も被らないように少し底上げ（既存 .scroll-content の後勝ち） */
#desktop-view .scroll-content{
  padding-bottom: calc(24px + var(--bottom-player-h)) !important; /* 24pxは呼吸スペース */
}

/* ▼ ボトムプレーヤー自体の高さを明示（見た目が固定なら入れておくと安定） */
#bottom-player{
  min-height: var(--bottom-player-h);
}

/* ▼ iOSの安全領域に追従強化（対応端末のみ効く） */
@supports (height: 100svh){
  #mobile-view,
  .mobile-content{
    padding-bottom: var(--mobile-bottom-gap) !important;
  }
}
