<style>
  .mypage-item {
    width: 160px;
    height: 160px;
    background: rgba(0, 0, 0, 0.6);
    border: none;
    border-radius: 8px;
    display: flex;
    flex-direction: column;
    justify-content: center;
    align-items: center;
    transition: transform 0.25s ease, box-shadow 0.25s ease;
    cursor: pointer;
  }

  .mypage-item:hover {
    transform: translateY(-4px);
    box-shadow: 0 6px 12px rgba(0, 0, 0, 0.4);
  }

  .mypage-item.search-item.wide {
    width: 240px;
  }

  .mypage-icon {
    display: block;
    margin: 0 auto;
    max-width: 90%;
  }

  .mypage-text {
    margin-top: 0.5rem;
    color: #fff;
    font-size: 1rem;
    text-align: center;
  }

  .user-dropdown-wrapper {
    position: absolute;
    top: 20px;
    right: 20px;
    z-index: 1000;
  }

  .user-dropdown {
    display: inline-block;
    position: relative;
  }

  .user-bar {
    display: flex;
    align-items: center;
    gap: 0.75rem;
    cursor: default;
  }

  .user-bar img {
    width: 40px;
    height: 40px;
    border-radius: 50%;
  }

  .user-bar span {
    color: #fff;
    font-size: 1.1rem;
    font-weight: 500;
     box-shadow:
    0 4px 12px rgba(0, 0, 0, 0.4),
    0 0 12px rgba(230, 0, 255, 0.3),
    0 0 24px rgba(230, 0, 255, 0.2);
  }

  .dropdown-menu {
    display: none;
    background-color: #222;
    padding: 0.75rem;
    border-radius: 10px;
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.4);
    position: absolute;
    top: 100%;
    right: 0;
    min-width: 200px;
  }

  .user-dropdown:hover .dropdown-menu,
  .dropdown-menu:hover {
    display: block;
     box-shadow:
    0 4px 12px rgba(0, 0, 0, 0.4),
    0 0 12px rgba(230, 0, 255, 0.3),
    0 0 24px rgba(230, 0, 255, 0.2);
  }

  .dropdown-item {
    color: #fff;
    padding: 0.6rem 0.9rem;
    display: block;
    font-size: 1rem;
    text-decoration: none;
  }

  .dropdown-item:hover {
    background-color: rgba(255, 255, 255, 0.1);
    
  }

  .dj-icon-fixed {
    position: absolute;
    top: 20px;
    left: 20px;
    z-index: 2000;
  }

  .dj-icon-fixed img {
    width: 220px;     /* å¥½ã¿ã«å¿œã˜ã¦èª¿æ•´å¯èƒ½ */
    height: auto;
    display: block;
  }

.mypage-item select.form-control {
  font-weight: bold;                     /* æ–‡å­—ã‚’å¤ªã */
  color: #fff;                           /* ç™½æ–‡å­—ã«çµ±ä¸€ï¼ˆä»»æ„ï¼‰ */
  background-color: #333;                /* ãƒ€ãƒ¼ã‚¯èƒŒæ™¯ */
  border: 1px solid #666;                /* æ ç·šèª¿æ•´ */
  box-shadow: inset 0 1px 3px rgba(0,0,0,0.4); /* å†…å´ã®å½±ã§ç«‹ä½“æ„Ÿ */

  transition: box-shadow 0.25s ease, border-color 0.25s ease;
}

.mypage-item select.form-control:hover {
  box-shadow:
    0 0 6px rgba(230, 0, 255, 0.5),
    0 0 12px rgba(230, 0, 255, 0.3);     /* ç´«ãŒã‹ã£ãŸãƒã‚ªãƒ³é¢¨ */
  border-color: rgba(230, 0, 255, 0.6);  /* å¢ƒç•Œç·šã‚‚å…‰ã‚‹ã‚ˆã†ã« */
  cursor: pointer;
}

.mypage-item input.form-control[type="text"] {
  font-weight: bold;
  color: #fff;                              /* â† æ–‡å­—ã‚’ç™½ã« */
  background-color: #333;                   /* ãƒ€ãƒ¼ã‚¯èƒŒæ™¯ */
  border: 1px solid #666;
  box-shadow: inset 0 1px 3px rgba(0, 0, 0, 0.4);

  transition: box-shadow 0.25s ease, border-color 0.25s ease;
}

.mypage-item input.form-control[type="text"]::placeholder {
  color: #aaa;                              /* ãƒ—ãƒ¬ãƒ¼ã‚¹ãƒ›ãƒ«ãƒ€ãƒ¼ã¯æ·¡ã„ã‚°ãƒ¬ãƒ¼ã« */
}

.mypage-item input.form-control[type="text"]:hover,
.mypage-item input.form-control[type="text"]:focus {
  box-shadow:
    0 0 6px rgba(0, 170, 255, 0.5),
    0 0 12px rgba(0, 170, 255, 0.3);         /* é’ãå…‰ã‚‹ã‚¨ãƒ•ã‚§ã‚¯ãƒˆ */
  border-color: rgba(0, 170, 255, 0.6);
  outline: none;
}

/* å…¥åŠ›æ¬„ã®ä¸‹è§’ã‚’å‰Šã‚‹ */
.no-bottom-radius {
  border-bottom-left-radius: 0 !important;
  border-bottom-right-radius: 0 !important;
}

/* å€™è£œãƒªã‚¹ãƒˆã®ä¸Šè§’ã‚’å‰Šã‚‹ + ãƒ‡ã‚¶ã‚¤ãƒ³ */
.tag-suggestions {
  border-top-left-radius: 0;
  border-top-right-radius: 0;
  background-color: #222;
  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.5);
  overflow: hidden;
}

.mypage-item.search-item.wide {
  overflow: visible;
  height: auto;
  min-height: 160px;
}


</style>


<div class="container mt-5 position-relative">


<div class="dj-icon-fixed">
  <%= image_tag "dj_robot_icon.png", alt: "DJ Robot" %>
</div>



  <% if user_signed_in? %>
    <div class="user-dropdown-wrapper">
      <div class="user-dropdown">
        <div class="user-bar">
          <%= image_tag current_user.profile_avatar_url, size: "32x32", class: "rounded-circle", alt: current_user.name %>

          <span class="ms-2 text-white"><%= current_user.name %></span>
        </div>
        <div class="dropdown-menu">
          <%= link_to "ãƒ­ã‚°ã‚¢ã‚¦ãƒˆ", destroy_user_session_path,
            method: :delete,
            data: { turbo: false },
            id: "logout-link",
            class: "dropdown-item text-danger" %>

          <div class="dropdown-divider"></div>
          <%= link_to 'ãƒ—ãƒ­ãƒ•ã‚£ãƒ¼ãƒ«ç·¨é›†', edit_user_registration_path, class: 'dropdown-item' %>
          <%= link_to 'ãƒã‚¤ãƒšãƒ¼ã‚¸', my_emotion_logs_path, class: 'dropdown-item' %>
          <%= link_to 'ãŠæ°—ã«å…¥ã‚Šãƒªã‚¹ãƒˆ', bookmarks_emotion_logs_path, class: 'dropdown-item' %>
          <%= link_to 'ãŠå•ã„åˆã‚ã›', '#', class: 'dropdown-item' %>
        </div>
      </div>
    </div>
  <% end %>
</div>


  <!-- ãƒ­ã‚´ -->
  <div class="text-center mt-4">
    <%= link_to emotion_logs_path do %>
      <%= image_tag "logo1.png", alt: "Emotion List Logo", class: "img-fluid neon-icon", style: "max-width:700px; width:100%;" %>
    <% end %>
  </div>

  <!-- ã‚­ãƒ£ãƒƒãƒã‚³ãƒ”ãƒ¼ -->
 <% unless user_signed_in? %>
  <!-- ã‚­ãƒ£ãƒƒãƒã‚³ãƒ”ãƒ¼ -->
  <div class="text-center mt-5 mb-4">
    <h1 style="font-size:3rem; font-weight:bold; color:rgb(215,205,216); text-shadow:0 0 10px,#1ee4da;">
      éŸ³æ¥½ã¨ã‚¹ãƒˆãƒ¬ã‚¹ã‚’æ”¯é…ã™ã‚‹
    </h1>
  </div>

  <!-- Neon ãƒœã‚¿ãƒ³ç¾¤ï¼ˆãƒ­ã‚°ã‚¤ãƒ³å‰ï¼‰ -->
  <div class="neon-btn-panel text-center mt-4">
    <%= link_to "https://soundcloud.com/signup",
                target: "_blank",
                rel: "noopener",
                class: "neon-btn btn-neon-xl me-3" do %>
      <div class="neon-btn-title">æ–°è¦ä½œæˆ</div>
      <div class="neon-btn-sub">(SoundCloudã‚¢ã‚«ã‚¦ãƒ³ãƒˆã‚‚ç°¡å˜ä½œæˆ)</div>
    <% end %>

      <%= link_to user_soundcloud_omniauth_authorize_path,
                class: "neon-btn btn-neon-xl",
                data: { turbo: false } do %>
      <div class="neon-btn-title">ãƒ­ã‚°ã‚¤ãƒ³ã—ã¦å§‹ã‚ã‚‹</div>
    <% end %>

  </div>

  <div class="neon-btn-footer large-text text-center mt-2">
    <strong>â€» ã¯ã˜ã‚ã¦ã®æ–¹ã¯æ–°è¦ä½œæˆã§ç™»éŒ²å¾Œã€<br>
    ã“ã®ç”»é¢ã«æˆ»ã£ã¦ã€Œãƒ­ã‚°ã‚¤ãƒ³ã—ã¦å§‹ã‚ã‚‹ã€ã‚’ã‚¯ãƒªãƒƒã‚¯ã—ã¦ãã ã•ã„ã€‚</strong>
  </div>
<% end %>


  <!-- ãƒ¡ã‚¤ãƒ³ãƒ¡ãƒ‹ãƒ¥ãƒ¼ -->
  <% if user_signed_in? %>
    <div class="d-flex justify-content-center align-items-stretch flex-wrap mt-4">
      <!-- ãƒ›ãƒ¼ãƒ  -->
      <div class="mypage-item">
       <%= link_to emotion_logs_path, class: 'mypage-icon-link' do %>
  <%= image_tag 'home.png', alt: 'ãƒ›ãƒ¼ãƒ ', class: 'mypage-icon' %>
  <div class='mypage-text'>ãƒ›ãƒ¼ãƒ </div>
<% end %>
      </div>

 <!-- ãŠã™ã™ã‚ğŸ”¥ -->
<div class="mypage-item">
  <%= link_to "#", class: "mypage-icon-link", onclick: "goToRecommended()" do %>
    <%= image_tag 'hot.png', alt: 'ãŠã™ã™ã‚', class: 'mypage-icon' %>
    <div class='mypage-text'>ãŠã™ã™ã‚ğŸ”¥</div>
  <% end %>
</div>



<div class="d-flex justify-content-center align-items-start flex-wrap mt-4" style="gap: 1rem;">
  <!-- EMOTION -->
  <div class="mypage-item search-item wide">
    <div style="color: magenta; font-weight: bold; font-size: 1rem; margin-bottom: 0.3rem; text-align: center;">
      EMOTION
    </div>
    <%= form_with url: emotion_logs_path, method: :get, local: true do |f| %>
      <%= select_tag :emotion,
                     options_for_select(
                       [['é¸æŠã—ãªã„', ''], ['æœ€é«˜', 'æœ€é«˜'], ['æ°—åˆ†è‰¯ã„', 'æ°—åˆ†è‰¯ã„'],
                        ['ã„ã¤ã‚‚é€šã‚Š', 'ã„ã¤ã‚‚é€šã‚Š'], ['ã‚¤ãƒ©ã‚¤ãƒ©', 'ã‚¤ãƒ©ã‚¤ãƒ©'], ['é™ç•Œ', 'é™ç•Œ']],
                     selected: params[:emotion]
                     ),
                     class: 'form-control',
                     onchange: 'this.form.submit()' %>
      <%= hidden_field_tag :genre, params[:genre] %>
    <% end %>
  </div>

<!-- ä¸­å¤®ã®ã€ŒåŒå£«ã‚’æ¢ã™ã€ -->
<div class="mypage-item d-flex justify-content-center <div class="mypage-item d-flex flex-column justify-content-center align-items-center"
     style="width: 160px; height: 160px; background: rgba(0, 0, 0, 0.6); border-radius: 8px; box-shadow: none; cursor: default;">
  
  <span style="color: #ff66cc; font-weight: bold; font-size: 1.1rem; text-shadow: 0 0 8px rgba(255, 102, 204, 0.5); text-align: center;">
    â†åŒå£«ã‚’æ¢ã™â†’
  </span>

  <%= link_to 'æ¤œç´¢ãƒªã‚»ãƒƒãƒˆ', emotion_logs_path,
              class: 'btn btn-sm mt-2',
              style: 'color: #fff; background-color: #555;
                      border: none; border-radius: 20px;
                      padding: 0.3rem 0.7rem;
                      text-shadow: 0 0 6px #f0f;
                      transition: all 0.2s ease;' %>
<%# â†‘ ãƒœã‚¿ãƒ³é¢¨ãƒªãƒ³ã‚¯ã¨ã—ã¦å®Ÿè£… %>
</div>


  <!-- TAG -->
<div class="mypage-item search-item wide"
     data-controller="tag-autocomplete"
     style="position: relative;">
  <div style="color: #00aaff; font-weight: bold; font-size: 1rem; margin-bottom: 0.3rem; text-align: center;">
    TAG
  </div>

  <%= form_with url: emotion_logs_path, method: :get, local: true do |f| %>
    <%= f.text_field :genre,
                     placeholder: 'Search by genre',
                     class: 'form-control no-bottom-radius',
                     value: params[:genre],
                     autocomplete: 'off',
                     data: { tag_autocomplete_target: "input" } %>
    <%= hidden_field_tag :emotion, params[:emotion] %>
  <% end %>

  <!-- å€™è£œãƒªã‚¹ãƒˆ -->
<ul
  data-tag-autocomplete-target="suggestions"
  class="list-group tag-suggestions"
  style="position: absolute;
         bottom: calc(100% - 2px); /* â† â† â† é£Ÿã„è¾¼ã¾ã›ã‚‹ */
         left: 0;
         width: 100%;
         z-index: 9999;
         margin: 0;">
</ul>

</div>



</div>








      <!-- ãƒã‚¤ãƒšãƒ¼ã‚¸ -->
      <div class="mypage-item">
        <%= link_to my_emotion_logs_path, class: 'mypage-icon-link' do %>
          <%= image_tag 'mypage_logo.png', alt: 'ãƒã‚¤ãƒšãƒ¼ã‚¸', class: 'mypage-icon' %>
          <div class='mypage-text'>ãƒã‚¤ãƒšãƒ¼ã‚¸</div>
        <% end %>
      </div>

      <!-- ãŠæ°—ã«å…¥ã‚Š -->
      <div class="mypage-item">
        <%= link_to bookmarks_emotion_logs_path, class: 'mypage-icon-link' do %>
          <%= image_tag 'favorite.png', alt: 'ãŠæ°—ã«å…¥ã‚Šãƒªã‚¹ãƒˆ', class: 'mypage-icon' %>
          <div class='mypage-text'>ãŠæ°—ã«å…¥ã‚Šãƒªã‚¹ãƒˆ</div>
        <% end %>
      </div>
    </div>
  <% end %>

  <br><br>
</div>


