<div class="container mt-4">
  <h3>📜 プレイリスト: <%= @playlist.name %></h3>

  <% if @playlist.playlist_items.empty? %>
    <p>まだ曲が追加されていません。</p>
  <% else %>
    <ul class="list-unstyled mt-3">
      <% @playlist.playlist_items.includes(:emotion_log).each do |item| %>
        <% log = item.emotion_log %>
        <li class="mb-4">
          <strong>🎵 <%= log.track_name %></strong>
          <% if log.music_url.include?("soundcloud.com") %>
            <iframe
              width="100%"
              height="66"
              scrolling="no"
              frameborder="no"
              allow="autoplay"
              src="https://w.soundcloud.com/player/?url=<%= CGI.escape(log.music_url) %>&auto_play=false&visual=false&show_user=false&show_comments=false">
            </iframe>
          <% else %>
            <p class="text-muted">SoundCloud URL が正しくありません。</p>
          <% end %>
        </li>
      <% end %>
    </ul>
  <% end %>

  <%= link_to "← プレイリスト一覧に戻る", playlists_path, class: "btn btn-secondary mt-3" %>
</div>
