<%# â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ %>
<%# ãƒ‘ãƒ¼ã‚·ãƒ£ãƒ«: ãƒ—ãƒ¬ã‚¤ãƒªã‚¹ãƒˆå†…ã®æ›²ä¸€è¦§ã‚’è¡¨ç¤ºã™ã‚‹ %>
<%# å‘¼ã³å‡ºã—å…ƒã‹ã‚‰ã¯ã€Œplaylistã€ã¨ã„ã†ãƒ­ãƒ¼ã‚«ãƒ«å¤‰æ•°ã‚’å—ã‘å–ã‚‹ %>
<%# â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ %>

<% if playlist.playlist_items.empty? %>
  <p class="text-center mt-4">ã¾ã æ›²ãŒè¿½åŠ ã•ã‚Œã¦ã„ã¾ã›ã‚“ã€‚</p>
<% else %>
  <ul class="list-unstyled mt-3 d-flex flex-column align-items-center" id="<%= dom_id(playlist, :contents) %>">
    <% playlist.playlist_items.includes(:emotion_log).each do |item| %>
      <% log = item.emotion_log %>

      <li class="mb-4 w-100">
        <div class="d-flex justify-content-center align-items-start mx-auto pmx_playlist_row">
          <!-- å·¦å´ãƒ–ãƒ­ãƒƒã‚¯ï¼šæ›²ã‚¿ã‚¤ãƒˆãƒ«ï¼‹ãƒ—ãƒ¬ãƒ¼ãƒ¤ãƒ¼ -->
          <div class="pmx_song_info">
            <strong>ğŸµ <%= log.track_name %></strong>
            <% if log.music_url&.include?("soundcloud.com") %>
              <iframe
                class="pmx_soundcloud_player mt-2"
                src="https://w.soundcloud.com/player/?url=<%= CGI.escape(log.music_url) %>&auto_play=false&visual=false&show_user=false&show_comments=false"
                allow="autoplay"
                frameborder="no"
                scrolling="no"
                height="66">
              </iframe>
            <% else %>
              <p class="text-muted mt-2">SoundCloud URL ãŒæ­£ã—ãã‚ã‚Šã¾ã›ã‚“ã€‚</p>
            <% end %>
          </div>

          <!-- å³å´ãƒ–ãƒ­ãƒƒã‚¯ï¼šå‰Šé™¤ãƒœã‚¿ãƒ³ -->
          <div class="pmx_remove_button">
            <%= button_to "å‰Šé™¤",
                  playlist_playlist_item_path(playlist, item),
                  method: :delete,
                  data: {
                    turbo_confirm: "æœ¬å½“ã«ã“ã®æ›²ã‚’ãƒ—ãƒ¬ã‚¤ãƒªã‚¹ãƒˆã‹ã‚‰å‰Šé™¤ã—ã¾ã™ã‹ï¼Ÿ",
                    turbo_frame: dom_id(playlist, :contents)
                  },
                  class: "btn btn-danger btn-sm" %>
          </div>
        </div>
      </li>
      
    <% end %>
  </ul>
<% end %>

<style>
  /* ã“ã“ã« pmx_ ãƒ—ãƒ¬ãƒ•ã‚£ãƒƒã‚¯ã‚¹ä»˜ãã®ã‚¹ã‚¿ã‚¤ãƒ«ã‚’ç½®ã„ã¦ã‚‚ã‹ã¾ã„ã¾ã›ã‚“ */
  .pmx_song_info {
    flex: 0 0 600px;
    max-width: 100%;
    display: flex;
    flex-direction: column;
    gap: 0.5rem;
  }

  .pmx_soundcloud_player {
    width: 100% !important;
    max-width: 600px;
    display: block;
  }

  .pmx_playlist_row {
    justify-content: center;
    gap: 1rem;
    flex-wrap: wrap;
  }

  .pmx_remove_button {
    /* ãƒœã‚¿ãƒ³å‘¨ã‚Šã®ä½™ç™½èª¿æ•´ãŒã‚ã‚Œã°ã“ã“ã« */
  }
</style>
